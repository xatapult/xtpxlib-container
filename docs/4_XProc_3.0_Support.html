<?xml version="1.0" encoding="UTF-8"?><html xmlns:xtlcon="http://www.xtpxlib.nl/ns/container" xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  
  
  
  
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <link rel="stylesheet" href="resources/bootstrap.min.css"/>
    <link rel="stylesheet" href="resources/xtpxlib-moduledoc.css"/>
    <link rel="shortcut icon" href="resources/favicon.ico"/>
    <title>4 XProc 3.0 Support</title>
  </head>
  <body style="padding-top: 65px;"><nav class="navbar fixed-top navbar-expand-sm navbar-dark bg-dark"><a class="navbar-brand" href="index.html" title="home">xtpxlib-container</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"/></button><div id="navbarSupportedContent" class="collapse navbar-collapse"><ul class="navbar-nav mr-auto"><li class="nav-item dropdown"><a href="1_Description.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Description <span class="caret"/></a><div class="dropdown-menu"><a href="1_Description.html" class="dropdown-item">Description</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="1_Description.html#d2203e163">Applications</a><a class="dropdown-item" href="1_Description.html#d2203e241">Working with containers</a></div></li><li class="nav-item dropdown"><a href="2_Container_format.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Container format <span class="caret"/></a><div class="dropdown-menu"><a href="2_Container_format.html" class="dropdown-item">Container format</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="2_Container_format.html#container-format-xproc-1">XProc 1.0 container format</a><a class="dropdown-item" href="2_Container_format.html#container-format-xproc-3">XProc 3.0 container format</a></div></li><li class="nav-item dropdown"><a href="3_XProc_1.0_Libraries.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">XProc 1.0 Libraries <span class="caret"/></a><div class="dropdown-menu"><a href="3_XProc_1.0_Libraries.html" class="dropdown-item">XProc 1.0 Libraries</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="3_XProc_1.0_Libraries.html#container.mod.xpl">XProc (1.0) library: container.mod.xpl</a></div></li><li class="nav-item dropdown"><a href="4_XProc_3.0_Support.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">XProc 3.0 Support <span class="caret"/></a><div class="dropdown-menu"><a href="4_XProc_3.0_Support.html" class="dropdown-item">XProc 3.0 Support</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="4_XProc_3.0_Support.html#xproc3-container-to-disk.xpl">XProc (3.0) pipeline: container-to-disk.xpl</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#xproc3-container-to-zip.xpl">XProc (3.0) pipeline: container-to-zip.xpl</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#xproc3-directory-to-container.xpl">XProc (3.0) pipeline: directory-to-container.xpl</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#xproc3-zip-to-container.xpl">XProc (3.0) pipeline: zip-to-container.xpl</a></div></li><li class="nav-item dropdown"><a href="5_XML_Schemas.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">XML Schemas <span class="caret"/></a><div class="dropdown-menu"><a href="5_XML_Schemas.html" class="dropdown-item">XML Schemas</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="5_XML_Schemas.html#container-xpl3.xsd">XML Schema: container-xpl3.xsd</a><a class="dropdown-item" href="5_XML_Schemas.html#container.xsd">XML Schema: container.xsd</a></div></li><li class="nav-item"><a class="nav-link" href="resources/xtpxlib-container-documentation.pdf" title="PDF version of this documentation site">PDF</a></li></ul></div></nav><div class="container"><a name="chapter-xproc-3-libraries"><!----></a><div class="page-header" style="padding-top: 65px; margin-top: -65px;"><h1 class="chapter"><span class="chapter-number">4 </span>XProc 3.0 Support</h1></div><p class="para">The xtpxlib-container component contains the following support (pipelines and/or libraries) for XProc 3.0:</p><div class="table"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Module/Pipeline</th><th>Description</th></tr></thead><tbody><tr><td><code class="code"><a href="#xproc3-container-to-disk.xpl"><span class="link">container-to-disk.xpl</span></a></code></td><td>Writes an xtpxlib container structure to disk. A base path must be provided, either as option <code class="code">$href-target</code> path or as <code class="code">/*/@href-target</code>.</td></tr><tr><td><code class="code"><a href="#xproc3-container-to-zip.xpl"><span class="link">container-to-zip.xpl</span></a></code></td><td>Writes an xtpxlib container structure to a zip file. A name for the output zip can be specified in either option <code class="code">$href-target-zip</code> or on the container in <code class="code">/*/@href-target-zip</code>.</td></tr><tr><td><code class="code"><a href="#xproc3-directory-to-container.xpl"><span class="link">directory-to-container.xpl</span></a></code></td><td>Loads a directory (with optional sub-directories) into an xtpxlib container structure.</td></tr><tr><td><code class="code"><a href="#xproc3-zip-to-container.xpl"><span class="link">zip-to-container.xpl</span></a></code></td><td>Loads the contents of a zip file (directory depth can be set) into an xtpxlib container structure.</td></tr></tbody></table></div><div class="sect1" id="xproc3-container-to-disk.xpl"><a name="xproc3-container-to-disk.xpl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">4.1</span> XProc (3.0) pipeline: <code class="code">container-to-disk.xpl</code></h2><p class="para">File: <code class="code">xpl3mod/container-to-disk/container-to-disk.xpl</code></p><p class="para">Type: <code class="code">xtlcon:container-to-disk</code></p><p class="para">Writes an xtpxlib container structure to disk. A base path must be provided, either as option <code class="code">$href-target</code> path or as <code class="code">/*/@href-target</code>.</p><div class="table"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Port</th><th>Type</th><th>Primary?</th><th>Description</th></tr></thead><tbody><tr><td><code class="code">source</code></td><td>in</td><td>yes</td><td>The container to process.</td></tr><tr><td><code class="code">result</code></td><td>out</td><td>yes</td><td>The input container structure with additional shadow attributes filled.</td></tr></tbody></table></div><div class="table"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Option</th><th>Type</th><th>Rq?</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code">href-target-path</code></td><td><code class="code">xs:string?</code></td><td> </td><td><code class="code">()</code></td><td>Base path where to write the container. When you specify this it will have precedence over a /*/@href-target-path.</td></tr><tr><td><code class="code">remove-target</code></td><td><code class="code">xs:boolean</code></td><td> </td><td><code class="code">true()</code></td><td>Whether to attempt to remove the target directory before writing.</td></tr></tbody></table></div></div><div class="sect1" id="xproc3-container-to-zip.xpl"><a name="xproc3-container-to-zip.xpl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">4.2</span> XProc (3.0) pipeline: <code class="code">container-to-zip.xpl</code></h2><p class="para">File: <code class="code">xpl3mod/container-to-zip/container-to-zip.xpl</code></p><p class="para">Type: <code class="code">xtlcon:container-to-zip</code></p><p class="para">Writes an xtpxlib container structure to a zip file. A name for the output zip can be specified in either option <code class="code">$href-target-zip</code> or on the container in <code class="code">/*/@href-target-zip</code>.</p><div class="table"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Port</th><th>Type</th><th>Primary?</th><th>Description</th></tr></thead><tbody><tr><td><code class="code">source</code></td><td>in</td><td>yes</td><td>The container to process.</td></tr><tr><td><code class="code">result</code></td><td>out</td><td>yes</td><td>The input container structure with additional shadow attributes filled.</td></tr></tbody></table></div><div class="table"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Option</th><th>Type</th><th>Rq?</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code">href-target-zip</code></td><td><code class="code">xs:string?</code></td><td> </td><td><code class="code">()</code></td><td>Nem of the zip file to write. When you specify this it will have precedence over a <code class="code">/*/@href-target-zip</code>.</td></tr></tbody></table></div></div><div class="sect1" id="xproc3-directory-to-container.xpl"><a name="xproc3-directory-to-container.xpl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">4.3</span> XProc (3.0) pipeline: <code class="code">directory-to-container.xpl</code></h2><p class="para">File: <code class="code">xpl3mod/directory-to-container/directory-to-container.xpl</code></p><p class="para">Type: <code class="code">xtlcon:directory-to-container</code></p><p class="para">Loads a directory (with optional sub-directories) into an xtpxlib container structure.</p><div class="table"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Port</th><th>Type</th><th>Primary?</th><th>Description</th></tr></thead><tbody><tr><td><code class="code">result</code></td><td>out</td><td>yes</td><td>The resulting container structure.</td></tr></tbody></table></div><div class="table"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Option</th><th>Type</th><th>Rq?</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code">add-document-target-paths</code></td><td><code class="code">xs:boolean</code></td><td> </td><td><code class="code">false()</code></td><td>Copies the relative source path as the target path <code class="code">@target-path</code> for the individual documents.<br/>The idea behind this is that in some cases you want to write almost the same structure back to disk. Recording the relative source path as the target path makes this easier: you don't have to set it explicitly.</td></tr><tr><td><code class="code">depth</code></td><td><code class="code">xs:integer</code></td><td> </td><td><code class="code">-1</code></td><td>The sub-directory depth to go. When lt <code class="code">0</code>, all sub-directories are processed.</td></tr><tr><td><code class="code">exclude-filter</code></td><td><code class="code">xs:string*</code></td><td> </td><td><code class="code">'\.git/'</code></td><td>Optional regular expression exclude filters. By default, <code class="code">.git</code> directories are excluded.</td></tr><tr><td><code class="code">href-source-directory</code></td><td><code class="code">xs:string</code></td><td>yes</td><td><code class="code"/></td><td>URI of the directory to read.</td></tr><tr><td><code class="code">href-source-directory</code></td><td><code class="code">xs:string</code></td><td> </td><td><code class="code">resolve-uri('test/', static-base-uri())</code></td><td/></tr><tr><td><code class="code">href-target-path</code></td><td><code class="code">xs:string?</code></td><td> </td><td><code class="code">()</code></td><td>Optional target path to record on the container.<br/>The idea behind this is that this makes it easier to write the container back to another location on disk, the target path is already there.</td></tr><tr><td><code class="code">include-filter</code></td><td><code class="code">xs:string*</code></td><td> </td><td><code class="code">()</code></td><td>Optional regular expression include filters.</td></tr><tr><td><code class="code">json-as-xml</code></td><td><code class="code">xs:boolean</code></td><td> </td><td><code class="code">if ($develop) then $develop-load-json-as-xml else false()</code></td><td>When JSON files are loaded (<code class="code">option $load-json</code> is <code class="code">true</code>): whether to add them to the container as XML or as JSON text. It will set the entry's content type to <code class="code">application/json+xml</code>.</td></tr><tr><td><code class="code">load-html</code></td><td><code class="code">xs:boolean</code></td><td> </td><td><code class="code">if ($develop) then $develop-load-html else false()</code></td><td>Whether to load HTML files.</td></tr><tr><td><code class="code">load-json</code></td><td><code class="code">xs:boolean</code></td><td> </td><td><code class="code">if ($develop) then $develop-load-json else false()</code></td><td>Whether to load JSON files.</td></tr><tr><td><code class="code">load-text</code></td><td><code class="code">xs:boolean</code></td><td> </td><td><code class="code">if ($develop) then $develop-load-text else false()</code></td><td>Whether to load text files.</td></tr><tr><td><code class="code">override-content-types</code></td><td><code class="code">array(array(xs:string))?</code></td><td> </td><td><code class="code">()</code></td><td>Override content types specification (see description of <code class="code">p:directory-list</code>).</td></tr></tbody></table></div></div><div class="sect1" id="xproc3-zip-to-container.xpl"><a name="xproc3-zip-to-container.xpl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">4.4</span> XProc (3.0) pipeline: <code class="code">zip-to-container.xpl</code></h2><p class="para">File: <code class="code">xpl3mod/zip-to-container/zip-to-container.xpl</code></p><p class="para">Type: <code class="code">xtlcon:zip-to-container</code></p><p class="para">Loads the contents of a zip file (directory depth can be set) into an xtpxlib container structure.</p><div class="table"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Port</th><th>Type</th><th>Primary?</th><th>Description</th></tr></thead><tbody><tr><td><code class="code">result</code></td><td>out</td><td>yes</td><td>The resulting container structure</td></tr></tbody></table></div><div class="table"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Option</th><th>Type</th><th>Rq?</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code">add-document-target-paths</code></td><td><code class="code">xs:boolean</code></td><td> </td><td><code class="code">false()</code></td><td>Copies the relative source path as the target path <code class="code">@target-path</code> for the individual documents.<br/>The idea behind this is that in some cases you want to write almost the same structure back to disk or zip. Recording the relative source path as the target path makes this easier: you don't have to set it explicitly.</td></tr><tr><td><code class="code">depth</code></td><td><code class="code">xs:integer</code></td><td> </td><td><code class="code">-1</code></td><td>The sub-directory depth to go. When lt <code class="code">0</code>, all sub-directories are processed.</td></tr><tr><td><code class="code">exclude-filter</code></td><td><code class="code">xs:string*</code></td><td> </td><td><code class="code">'\.git/'</code></td><td>Optional regular expression exclude filters. By default, <code class="code">.git</code> directories are excluded.</td></tr><tr><td><code class="code">href-source-zip</code></td><td><code class="code">xs:string</code></td><td>yes</td><td><code class="code"/></td><td>URI of the directory to read.</td></tr><tr><td><code class="code">href-source-zip</code></td><td><code class="code">xs:string</code></td><td> </td><td><code class="code">resolve-uri('test/test-contents.zip', static-base-uri())</code></td><td/></tr><tr><td><code class="code">href-target-path</code></td><td><code class="code">xs:string?</code></td><td> </td><td><code class="code">()</code></td><td>Optional target path to record on the container.<br/>The idea behind this is that this makes it easier to write the container back to another location on disk, the target path is already there.</td></tr><tr><td><code class="code">include-filter</code></td><td><code class="code">xs:string*</code></td><td> </td><td><code class="code"/></td><td>Optional regular expression include filters.</td></tr><tr><td><code class="code">json-as-xml</code></td><td><code class="code">xs:boolean</code></td><td> </td><td><code class="code">if ($develop) then $develop-load-json-as-xml else false()</code></td><td>When json files are loaded (<code class="code">option $load-json</code> is <code class="code">true</code>): whether to add them to the container as XML or as JSON text. It will set the appropriate entry's content type to <code class="code">application/json+xml</code>.</td></tr><tr><td><code class="code">load-html</code></td><td><code class="code">xs:boolean</code></td><td> </td><td><code class="code">if ($develop) then $develop-load-html else false()</code></td><td>Whether to load HTML files.</td></tr><tr><td><code class="code">load-json</code></td><td><code class="code">xs:boolean</code></td><td> </td><td><code class="code">if ($develop) then $develop-load-json else false()</code></td><td>Whether to load JSON files.</td></tr><tr><td><code class="code">load-text</code></td><td><code class="code">xs:boolean</code></td><td> </td><td><code class="code">if ($develop) then $develop-load-text else false()</code></td><td>Whether to load text files.</td></tr><tr><td><code class="code">override-content-types</code></td><td><code class="code">array(array(xs:string))?</code></td><td> </td><td><code class="code">()</code></td><td>Override content types specification (see description of <code class="code">p:archive-manifest</code>).</td></tr></tbody></table></div></div></div><script src="resources/jquery-3.4.1.slim.min.js"><!--  --></script><script src="resources/popper.min.js"><!--  --></script><script src="resources/bootstrap.min.js"><!--  --></script></body>
</html>